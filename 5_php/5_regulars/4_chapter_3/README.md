# Задачи на регулярные выражения PHP. Часть 3

## Примеры решения задач

**Задача**. Дана строка 'aaa:444 kkk:333'. Напишите регулярку, которая найдет строки по шаблону: любое количество букв, символ ":", любое цифр и поменяет местами то, что стоит до ":" на то, что стоит после него. Например, aaa:444 должно превратиться в 444:aaa.

**Решение**: положим то, что стоит до символа ":" в первый карман, то, что стоит после ":" во второй карман, а затем в строке замены переставим местами содержимое первого кармана и второго, вот так - $2:$1:

```php
<?php
	echo preg_replace('#([a-z]+):(\d+)#i', '$2:$1', 'aaa:444 kkk:333');
?>
```

Результат выполнения кода:

`444:aaa 333:kkk`

**Задача**. Дана строка '332 441 550'. Найдите все места, где есть два одинаковых идущих подряд цифры и замените их на '!'.

**Решение**: чтобы решить данную задачу, необходимо искать цифру, ложить ее в карман и затем смотреть, следует за цифрой такая же цифра или нет, используя обращение к карману \1:

```php
<?php
	echo preg_replace('#(\d)\1#i', '!', '332 441 550');
?>
```
Результат выполнения кода:

```
!2 !1 !0
```
## Задачи для решения
### На карманы при замене
1.  Дана строка 'aaa@bbb eee7@kkk'. Напишите регулярку, которая найдет строки по шаблону: любое количество букв и цифр, символ @, любое количество букв и цифр и поменяет местами то, что стоит до @ на то, что стоит после нее. Например, aaa@bbb должно превратиться в bbb@aaa.

1.  Дана строка вида 'a1b2c3'. Напишите регулярку, которая найдет все цифры и удвоит их количество таким образом: 'a11b22c33' (то есть рядом с каждой цифрой напишет такую же).

### На карманы в самой регулярке
1.  Дана строка 'aae xxz 33a'. Найдите все места, где есть два одинаковых идущих подряд символа и замените их на '!'.

1.  Дана строка 'aaa bcd xxx efg'. Найдите строки, состоящие из одинаковых символов (это будет aaa xxx).

### Задачи на preg_match[_all]
Задачи ниже не всегда можно решить с помощью одной только регулярки. Может понадобится еще что-нибудь дописать на PHP (не всегда, но такое может быть).

1.  С помощью preg_match определите, что переданная строка является емэйлом. Примеры емэйлов для тестирования mymail@mail.ru, my.mail@mail.ru, my-mail@mail.ru, my_mail@mail.ru, mail@mail.com, mail@mail.by, mail@yandex.ru.

1.  Дана строка с текстом, в котором могут быть емейлы. С помощью preg_match_all найдите все емэйлы.

1.  С помощью preg_match определите, что переданная строка является доменом. Примеры доменов: site.ru, site.com, my-site123.com.

1.  С помощью preg_match определите, что переданная строка является доменом 3-го уровня. Примеры доменов: hello.site.ru, hello.site.com, hello.my-site.com.

1.  С помощью preg_match определите, что переданная строка является доменом, название которого начинается с http. Примеры доменов: http://site.ru, http://site.com.

1.  С помощью preg_match определите, что переданная строка является доменом вида http://site.ru. Протокол может быть как http, так и https.

1.  С помощью preg_match определите, что переданная строка является доменом. Протокол может быть как http, так и https. Домен может быть со слешем в конце: http://site.ru, http://site.ru/, https://site.ru, https://site.ru/.

1.  С помощью preg_match определите, что переданная строка начинается с http или с https.

1.  С помощью preg_match определите, что переданная строка заканчивается расширением txt, html или php.

1.  С помощью preg_match определите, что переданная строка заканчивается расширением jpg или jpeg.

1.  С помощью preg_match узнайте является ли строка числом, длиной до 12 цифр.

1.  Дана строка с буквами, пробелами и цифрами. Найдите сумму всех чисел из данной строки.

### Задачи на preg_replace
1.  С помощью preg_replace преобразуйте дату в формате '31-12-2014' в '2014.12.31'.

1.  С помощью preg_replace замените в строке домены вида http://site.ru, http://site.com на <a href="http://site.ru">site.ru</a>.